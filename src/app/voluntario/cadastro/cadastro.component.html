<p-toast position="top-right"></p-toast>

<div class="page-container">
  <div class="form-container">
    <h2>CONSac - Cadastro Voluntário</h2>

    <!-- Início do Formulário com formGroup -->
    <form [formGroup]="cadastroForm" (ngSubmit)="onSubmit()">
      <p-accordion [multiple]="true" [activeIndex]="[0]">

        <!-- Informações Pessoais -->
        <p-accordionTab header="Informações Pessoais">
          <div class="p-field">
            <label for="matricula">Matrícula:</label>
            <input id="matricula" type="text" pInputText formControlName="matricula" />
            <div *ngIf="cadastroForm.get('matricula')?.invalid && cadastroForm.get('matricula')?.touched">
              <small class="p-error">Matrícula deve conter exatamente 8 números.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="nome">Nome Completo:</label>
            <input id="nome" type="text" pInputText formControlName="nome" />
            <div *ngIf="cadastroForm.get('nome')?.invalid && cadastroForm.get('nome')?.touched">
              <small class="p-error">Nome é obrigatório e deve conter pelo menos 3 caracteres.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="cpf">CPF:</label>
            <input id="cpf" type="text" pInputText formControlName="cpf" />
            <div *ngIf="cadastroForm.get('cpf')?.invalid && cadastroForm.get('cpf')?.touched">
              <small class="p-error">CPF inválido.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="dataNascimento">Data de Nascimento:</label>
            <p-calendar formControlName="dataNascimento" [showIcon]="true" dateFormat="yy-mm-dd"></p-calendar>
            <div *ngIf="cadastroForm.get('dataNascimento')?.invalid && cadastroForm.get('dataNascimento')?.touched">
              <small class="p-error">Data de nascimento é obrigatória.</small>
            </div>
          </div>
        </p-accordionTab>

        <!-- Contato -->
        <p-accordionTab header="Contato">
          <div class="p-field">
            <label for="emailInstitucional">E-mail Institucional:</label>
            <input id="emailInstitucional" type="email" pInputText formControlName="emailInstitucional" />
            <div *ngIf="cadastroForm.get('emailInstitucional')?.invalid && cadastroForm.get('emailInstitucional')?.touched">
              <small class="p-error">E-mail inválido ou domínio não permitido.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="emailParticular">E-mail Particular (Opcional):</label>
            <input id="emailParticular" type="email" pInputText formControlName="emailParticular" />
          </div>

          <div class="p-field">
            <label for="celular">Celular:</label>
            <input id="celular" type="text" pInputText formControlName="celular" />
            <div *ngIf="cadastroForm.get('celular')?.invalid && cadastroForm.get('celular')?.touched">
              <small class="p-error">Celular inválido.</small>
            </div>
          </div>
        </p-accordionTab>

        <!-- Endereço -->
        <p-accordionTab header="Endereço">
          <div class="p-field">
            <label for="endereco">Endereço:</label>
            <input id="endereco" type="text" pInputText formControlName="endereco" />
            <div *ngIf="cadastroForm.get('endereco')?.invalid && cadastroForm.get('endereco')?.touched">
              <small class="p-error">Endereço inválido.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="bairro">Bairro:</label>
            <input id="bairro" type="text" pInputText formControlName="bairro" />
            <div *ngIf="cadastroForm.get('bairro')?.invalid && cadastroForm.get('bairro')?.touched">
              <small class="p-error">Bairro inválido.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="local">Local:</label>
            <input id="local" type="text" pInputText formControlName="local" />
            <div *ngIf="cadastroForm.get('local')?.invalid && cadastroForm.get('local')?.touched">
              <small class="p-error">Local é obrigatório.</small>
            </div>
          </div>
        </p-accordionTab>

        <!-- Disponibilidade -->
        <p-accordionTab header="Disponibilidade">
          <div class="p-field">
            <label for="disponibilidadeHorario">Disponibilidade de Horário:</label>
            <select id="disponibilidadeHorario" formControlName="disponibilidadeHorario">
              <option value="manha-tarde">Manhã-Tarde</option>
              <option value="tarde-noite">Tarde-Noite</option>
              <option value="final-semana">Final de Semana</option>
            </select>
            <div
              *ngIf="cadastroForm.get('disponibilidadeHorario')?.invalid && cadastroForm.get('disponibilidadeHorario')?.touched">
              <small class="p-error">Disponibilidade de horário é obrigatória.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="horario">Horário:</label>
            <input id="horario" type="time" pInputText formControlName="horario" />
            <div *ngIf="cadastroForm.get('horario')?.invalid && cadastroForm.get('horario')?.touched">
              <small class="p-error">Horário é obrigatório.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="areaInteresse">Área de Interesse:</label>
            <select id="areaInteresse" formControlName="areaInteresse">
              <option *ngFor="let area of interestAreas" [value]="area">{{ area }}</option>
            </select>
            <div *ngIf="cadastroForm.get('areaInteresse')?.invalid && cadastroForm.get('areaInteresse')?.touched">
              <small class="p-error">Área de Interesse é obrigatória.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="periodoInicio">Período Início:</label>
            <p-calendar formControlName="periodoInicio" [showIcon]="true" dateFormat="yy-mm-dd"></p-calendar>
            <div *ngIf="cadastroForm.get('periodoInicio')?.invalid && cadastroForm.get('periodoInicio')?.touched">
              <small class="p-error">Período de início é obrigatório.</small>
            </div>
          </div>

          <div class="p-field">
            <label for="periodoFim">Período Fim:</label>
            <p-calendar formControlName="periodoFim" [showIcon]="true" dateFormat="yy-mm-dd"></p-calendar>
            <div *ngIf="cadastroForm.get('periodoFim')?.invalid && cadastroForm.get('periodoFim')?.touched">
              <small class="p-error">Período de fim é obrigatório.</small>
            </div>
          </div>
        </p-accordionTab>

        <!-- Senha -->
        <p-accordionTab header="Senha">
          <div class="p-field">
            <label for="senha">Senha:</label>
            <p-password [feedback]="false" formControlName="senha"></p-password>
            <div *ngIf="cadastroForm.get('senha')?.invalid && cadastroForm.get('senha')?.touched">
              <small class="p-error">Senha é obrigatória e deve ter no mínimo 6 caracteres.</small>
            </div>
          </div>
        </p-accordionTab>

        <!-- Competência -->
        <p-accordionTab header="Competência">
          <div class="p-field">
            <label for="competencia">Competência:</label>
            <textarea id="competencia" rows="3" pInputTextarea formControlName="competencia"></textarea>
            <div *ngIf="cadastroForm.get('competencia')?.invalid && cadastroForm.get('competencia')?.touched">
              <small class="p-error">Competência deve ser preenchida e pode conter apenas letras, números, vírgulas e pontos.</small>
            </div>
          </div>
        </p-accordionTab>

      </p-accordion>

      <!-- Botão de Enviar Formulário -->
      <div class="button-container">
        <button type="submit" label="Cadastrar" class="ui-button-primary">Cadastrar</button>
      </div>
    </form>
  </div>
</div>
